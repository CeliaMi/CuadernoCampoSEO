<?php

namespace App\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\AbstractController;
use Symfony\Component\HttpFoundation\Response;
use Symfony\Component\Routing\Annotation\Route;
use Symfony\Component\HttpFoundation\JsonResponse;
use Symfony\Component\HttpFoundation\Request;
use App\Repository\AlertaRepository;
use App\Entity\Alerta;
use Symfony\Component\Serializer\Encoder\XmlEncoder;

class ResponseXMLController extends AbstractController
{
    #[Route('/response/xml', name:'app_response_xml',methods: ['GET',"POST"])]
    public function responseXML(Request $request, AlertaRepository $alertaRepository): Response
    {    
        $Lamenaza = $this->getDoctrine()
        ->getRepository(Alerta::class)
        ->findAll();
        $data = [];
        foreach ($Lamenaza as $p) {
            $data[] = [
                'id' => $p->getId(),
                'TipoAlerta' => $p->getTipoAmenaza(),
                'Descripcion'=> $p ->getDescripcion(),
            ];
        }
        return $this->json($data);
        
    }
}

    
